using Akiled.Communication.Packets.Outgoing.Structure;using Akiled.HabboHotel.GameClients;using Akiled.HabboHotel.Items;using Akiled.HabboHotel.Rooms;namespace Akiled.Communication.Packets.Incoming.Structure{    class UpdateMagicTileEvent : IPacketEvent    {        public void Parse(GameClient Session, ClientPacket Packet)        {            if (Session != null && Session.GetHabbo() != null)            {                int ItemId = Packet.PopInt();                int HeightToSet = Packet.PopInt();                Room room = AkiledEnvironment.GetGame().GetRoomManager().GetRoom(Session.GetHabbo().CurrentRoomId);                if (room?.CheckRights(Session) ?? false)                {                    Item item = room.GetRoomItemHandler().GetItem(ItemId);                    if ((item != null && item.GetBaseItem().InteractionType == InteractionType.pilemagic))                    {                        if (HeightToSet > 5000)                        {                            HeightToSet = 5000;                        }                        if (HeightToSet < 0)                        {                            HeightToSet = 0;                        }                        double TotalZ = (double)(HeightToSet / 100.00);                        item.SetState(item.GetX, item.GetY, TotalZ, item.GetAffectedTiles);                        room.SendPacket(new ObjectUpdateComposer(item, item.OwnerId));                    }                }            }        }    }}